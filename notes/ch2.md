# 第2章-程序结构-笔记

## 2.1 名称

* Go中函数、变量、常量、类型、语句标签和包的名称遵循一个规则：名称的开头是一个字母(Unicode中的字符即可)
  或下划线，后面可以跟任意数量的字符、数字或下划线，并区分大小写
* Go有25个关键字

```
break        default      func         interface    select
case         defer        go           map          struct
chan         else         goto         package      switch
const        fallthrough  if           range        type
continue     for          import       return       var
```

* Go有37个预定义标识符

```
常量：true false iota nil
类型：int int8 int16 int32 int64
     uint uint8 uint16 uint32 uint64 uintptr
     float32 float64 complex128 complex64
     bool byte rune string error
函数：make len cap new append copy close delete
     complex real imag 
     panic recover
```

* 预定义标识符可以声明使用，但是会有冲突的风险，所以不建议这样做
* 如果一个实体在函数声明，它只在函数局部有效。如果在函数外部声明，它将对包里面的所有源文件可见
* 实体第一个字母的大小写决定了实体在包外的可见性。如果实体名字是以`大写字母`
  开头的，它是导出的，那么该实体对包外是可见和可访问。如果实体名字是以`小写字母`开头的，那么该实体对包外是不可见的
* 包名本身总是由小写字母组成
* Go编程风格倾向于使用短名称，特别是作用域较小的局部变量。通常，名称的作用域越大，就使用越长且更具有描述性的名称
* 风格上，当遇到由单词组合的名称时，Go使用`“驼峰式”`风格，使用大写字母，首字母缩写词通常使用相同的大小写

## 2.2 声明

* 声明是给一个程序实体命名，并且设定其部分或全部属性，有`4`个主要的声明：变量(var)、常量(const)、类型(type)和函数(func)
* Go程序存储在一个或多个以`.go`为文件后缀名的源文件中，每个源文件以`包声明语句`开始，说明该文件属于哪个包，然后是`import`
  导入依赖的包，最后是包一级的类型、变量、常量和函数的声明语句，这些语句不区分顺序
* 函数的声明包含一个名字、参数列表(由函数的调用者提供的变量)、一个可选的返回值列表和函数体(其中包含具体逻辑语句)
  ，如果函数没有返回值，那么返回值列表可以省略，函数的返回值列表可以包含零个或多个值，如果函数有返回值，那么必须以`return`
  语句结尾，函数的返回值可以被命名，它们会被视作在函数的顶部声明的变量，函数的返回值的名称应当具有一定的意义，可以作为文档使用
* 函数的执行从第一个语句开始，直到遇到`return`语句或者函数的末尾(隐式的`return`)
  ，如果函数的返回值被命名，那么可以通过`return`语句的不带参数的`return`来返回，这种方式称为`裸返回`
  ，裸返回语句只能出现在函数体的最后一个语句块中，裸返回语句会将函数中的每一个命名返回值按照其声明顺序返回，如果函数的返回值没有被命名，那么`return`
  语句必须带上返回值列表，即使返回值列表为空，也必须显式的写上`return`语句

## 2.3 变量

* `var`声明创建一个具体类型的变量，然后给它一个名字并设置初始值。通用形式 `var name type = expression`
* `var name type = expression` 中`type`和`expression`可以省略一个，但不能都省略。如果省略`type`，那么将根据`expression`
  来推导变量的`type`，如果省略`expression`，那么将使用`type`的零值初始化变量
* `Go`里面不存在未初始化的变量，因为零值机制的保证。数字的零值是`0`，布尔值的零值是`false`，字符串的零值是`""`
  ，接口或引用类型(包括`slice`、`map`、`chan`和函数)的零值是`nil`
  ，对于一个像数组或结构体这样的复合类型，零值是其所有元素或成员的零值
* 可以声明一个变量列表，并选择使用对应的表达式列表来初始化它们，例如：`var i, j, k int = 1, 2, 3`
* 忽略类型允许声明多个不同类型的变量 `var b, f, s = true, 2.3, "four"`
* 初始值设定可以是字面量值或者任意的表达式
* 包级别的初始化在`main`开始之前进行，局部变量的初始化在其声明语句被执行到的时候进行
* 变量可以通过调用返回多个值的函数进行初始化，例如：`var f, err = os.Open(name)`

### 2.3.1 短变量声明

* 在函数中，使用`name := expression` 的形式可以声明并初始化一个局部变量，它的类型由`expression`来决定
* 短变量声明因其短小、灵活，所以在局部变量的声明和初始化中主要使用它，`var`
  声明通常为那些跟初始化表达式类型不一致的局部变量保留，或者用于后面才对变量赋值以及变量初始化值不重要的情况
* 与`var`声明一样，多个变量可以以短变量声明的方式声明和初始化
* 只有使用短变量声明对可读性有帮助才使用多个初始化表达式来进行变量声明，例如`for`循环初始化
* 短变量声明不需要声明所有在左边的变量，但是至少需要声明一个新的变量，否则将会导致编译错误，对于一些在上面声明的变量，短变量声明将会对其进行赋值

### 2.3.2 指针

* 指针的值是一个变量的`地址`
* 一个指针指示值所保存的位置，而不是它所指向的值本身，通过指针间接的读取或更新一个变量的值，这个过程称为`间接引用`
  或`重定向`
* 不是所有的值都有地址，但是所有的变量都有
* `&`操作符可以返回一个变量的地址，`*`操作符可以间接的读取一个指针指向的变量的值，这两个操作符是一对互补操作符
* 每一个聚合类型变量的组成（结构体的成员或数组中的元素）都是变量，所以它们也有地址
* 代表变量的表达式，是唯一可以应用`&`操作符的表达式
* 指针类型的零值是`nil`
* 指针是可比较的，两个指针只有在它们指向同一个变量或者都是`nil`的情况下才相等
* 